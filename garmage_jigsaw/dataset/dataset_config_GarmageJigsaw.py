from easydict import EasyDict as edict

__C = edict()

dataset_cfg = __C

__C.GARMAGE_JIGSAW = edict()
__C.GARMAGE_JIGSAW.DATA_DIR = ""
__C.GARMAGE_JIGSAW.DATASET_SPLIT_DIR = "data/stylexd_jigsaw/dataset_split"

__C.GARMAGE_JIGSAW.DATA_TYPES = edict()
__C.GARMAGE_JIGSAW.DATA_TYPES.INFERENCE = []

__C.GARMAGE_JIGSAW.SHUFFLE = True

__C.GARMAGE_JIGSAW.LENGTH = -1
__C.GARMAGE_JIGSAW.TEST_LENGTH = -1
__C.GARMAGE_JIGSAW.OVERFIT = -1

__C.GARMAGE_JIGSAW.PCS_NOISE_STRENGTH = 1.

# point sample num per garment
__C.GARMAGE_JIGSAW.NUM_PC_POINTS = 5000
# minimal point num per panel
__C.GARMAGE_JIGSAW.MIN_PART_POINT = 30

# maximum / minimal panel per garment
__C.GARMAGE_JIGSAW.MAX_NUM_PART = 20
__C.GARMAGE_JIGSAW.MIN_NUM_PART = 2

# boundary sample type
__C.GARMAGE_JIGSAW.PCS_SAMPLE_TYPE = edict()
__C.GARMAGE_JIGSAW.PCS_SAMPLE_TYPE.TRAIN = "stitch"
__C.GARMAGE_JIGSAW.PCS_SAMPLE_TYPE.VAL = "stitch"
__C.GARMAGE_JIGSAW.PCS_SAMPLE_TYPE.INFERENCE = "boundary_pcs"
__C.GARMAGE_JIGSAW.PCS_SAMPLE_TYPE.STITCH = edict()
__C.GARMAGE_JIGSAW.PCS_SAMPLE_TYPE.STITCH.ONLY_SAMPLE_BOUNDARY = False

# Mesh shrink before point sample.
__C.GARMAGE_JIGSAW.SHRINK_MESH = edict()
__C.GARMAGE_JIGSAW.SHRINK_MESH.TRAIN = False
__C.GARMAGE_JIGSAW.SHRINK_MESH.VAL = False
__C.GARMAGE_JIGSAW.SHRINK_MESH.INFERENCE = False
__C.GARMAGE_JIGSAW.SHRINK_MESH_PARAM = edict()
__C.GARMAGE_JIGSAW.SHRINK_MESH_PARAM.TRAIN = 0.
__C.GARMAGE_JIGSAW.SHRINK_MESH_PARAM.VAL = 0.
__C.GARMAGE_JIGSAW.SHRINK_MESH_PARAM.INFERENCE = 0.

# Noise panel boundary by stitch information.
__C.GARMAGE_JIGSAW.SHRINK_BYSTITCH = edict()
__C.GARMAGE_JIGSAW.SHRINK_BYSTITCH.TRAIN = False
__C.GARMAGE_JIGSAW.SHRINK_BYSTITCH.VAL = False
__C.GARMAGE_JIGSAW.SHRINK_BYSTITCH.INFERENCE = False
__C.GARMAGE_JIGSAW.SHRINK_BYSTITCH_STRENGTH = edict()
__C.GARMAGE_JIGSAW.SHRINK_BYSTITCH_STRENGTH.TRAIN = 0.
__C.GARMAGE_JIGSAW.SHRINK_BYSTITCH_STRENGTH.VAL = 0.
__C.GARMAGE_JIGSAW.SHRINK_BYSTITCH_STRENGTH.INFERENCE = 0.

# pointcloud noise
__C.GARMAGE_JIGSAW.PCS_NOISE_TYPE = "default"

# panel noise
__C.GARMAGE_JIGSAW.PANEL_NOISE_TYPE = edict()
__C.GARMAGE_JIGSAW.PANEL_NOISE_TYPE.TRAIN = "default"
__C.GARMAGE_JIGSAW.PANEL_NOISE_TYPE.VAL = "default"
__C.GARMAGE_JIGSAW.PANEL_NOISE_TYPE.INFERENCE = "default"
__C.GARMAGE_JIGSAW.SCALE_RANGE = 0.04
__C.GARMAGE_JIGSAW.ROT_RANGE = 1.
__C.GARMAGE_JIGSAW.TRANS_RANGE = 1.
__C.GARMAGE_JIGSAW.BBOX_NOISE_STRENGTH = 15

# Stitching noise for augment
__C.GARMAGE_JIGSAW.USE_STITCH_NOISE = False
__C.GARMAGE_JIGSAW.STITCH_NOISE_STRENGTH = 1.
__C.GARMAGE_JIGSAW.STITCH_NOISE_RANDOM_RANGE = [0.8, 2.2]

# Threshhold of point classify
__C.GARMAGE_JIGSAW.PC_CLS_THRESHOLD = 0.8

def get_dataset_cfg():
    return dataset_cfg.GARMAGE_JIGSAW